<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="QuickLoan Calc - Easily calculate your loan payments and see how much interest you can save with extra payments.">
    <title>QuickLoan Calc - Your Smart Loan Calculator</title>
    <style>
        /* CSS styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        /* ... Existing CSS ... */

        /* CSS to Disable Printing */
        @media print {
            body * {
                visibility: hidden;
            }
            #results, #results * {
                visibility: visible;
            }
            #results {
                position: absolute;
                left: 0;
                top: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Existing HTML Content -->

        <button onclick="calculateLoan()">Calculate</button>

        <div id="results">
            <!-- Results will be displayed here -->
        </div>

        <!-- ... Existing HTML Sections ... -->
    </div>

    <script>
        // JavaScript code to handle the loan calculation
        function calculateLoan() {
            var amount = parseFloat(document.getElementById('amount').value) || 0;
            var interestRate = parseFloat(document.getElementById('interestRate').value) || 0;
            var loanTermIndex = parseInt(document.getElementById('loanTerm').value, 10);
            var extraPayment = parseFloat(document.getElementById('extraPayment').value) || 0;
            var monthlyInterestRate = (interestRate / 100) / 12;

            var terms = [72, 84, 96, 120, 144, 180, 204, 240]; // Loan terms
            var loanTerm = terms[loanTermIndex];

            function calculatePayment(term) {
                if (interestRate === 0) {
                    return amount / term; // Handle zero interest rate
                }
                return amount * monthlyInterestRate / (1 - Math.pow(1 + monthlyInterestRate, -term));
            }

            // Validate loan term and amount
            if (loanTerm <= 0 || amount <= 0) {
                alert("Please ensure that the loan amount and term are correctly set.");
                return;
            }

            var standardPayment = calculatePayment(loanTerm);
            var totalPaymentWithExtra = standardPayment + extraPayment;
            var totalInterestWithoutExtra = standardPayment * loanTerm - amount;

            // Calculation with extra payments
            var currentBalance = amount;
            var totalInterestPaidWithExtra = 0;
            var monthsWithExtra = 0;
            while (currentBalance > 0) {
                var interestForThisMonth = currentBalance * monthlyInterestRate;
                var principalForThisMonth = Math.min(standardPayment - interestForThisMonth + extraPayment, currentBalance);
                currentBalance -= principalForThisMonth;
                totalInterestPaidWithExtra += interestForThisMonth;
                monthsWithExtra++;
                if (monthsWithExtra >= loanTerm) break;
            }

            var effectiveInterestRate = (extraPayment > 0) ? (totalInterestPaidWithExtra / amount) / (monthsWithExtra / 12) * 100 : interestRate;
            var interestSaved = totalInterestWithoutExtra - totalInterestPaidWithExtra;
            var monthsReduced = loanTerm - monthsWithExtra;

            var resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class='result-highlight'>
                    <h3>Loan Payment Details:</h3>
                    <p>Base Monthly Payment (Principal + Interest): $${standardPayment.toFixed(2)}</p>
                    <p>Additional Principal Payment: $${extraPayment.toFixed(2)}</p>
                    <p>Total Monthly Payment: $${totalPaymentWithExtra.toFixed(2)}</p>
                    <p>Effective Interest Rate: ${effectiveInterestRate.toFixed(2)}%</p>
                    <p>Interest Saved: $${interestSaved.toFixed(2)}</p>
                    <p>Loan will be paid off in ${monthsWithExtra} months, ${monthsReduced} months sooner than the original term.</p>
                </div>
                <!-- ... code for displaying other loan terms ... -->
            `;
        }

        window.onload = function() {
            var loanTermSlider = document.getElementById('loanTerm');
            loanTermSlider.oninput = function() {
                var terms = [72, 84, 96, 120, 144, 180, 204, 240];
                var termValue = terms[this.value];
                document.getElementById('loanTermDisplay').textContent = termValue + ' months';
                calculateLoan();
            };

            var extraPaymentSlider = document.getElementById('extraPayment');
            extraPaymentSlider.oninput = function() {
                document.getElementById('extraPaymentDisplay').textContent = '$' + this.value;
                calculateLoan();
            };
            loanTermSlider.oninput(); // Initialize
            extraPaymentSlider.oninput(); // Initialize
        };
    </script>
</body>
</html>
